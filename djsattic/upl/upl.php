<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="content-type" content="text/html;charset=utf-8" /><?phprequire_once "../../includes/mySQL_Sessions.inc";session_start();	if (empty($_SESSION['idnum']))	{ die("No User Specified"); }$sess_id =  session_id();$key = dechex(mktime());$Offset['vt'] = 60;$Offset['hr'] = 10;$msg_top = 12;$left_bttn = 140;$left_title = 20;echo 	"\n<style>"		." div, input {"		."position:absolute;"		."font:normal 12px arial;"		."}"				." div {"		."border:none;"		."background-color:transparent;"		."}"					." div.file {"		."left:".($Offset['hr']+14)."px;"		."top:".($Offset['vt']+62)."px;"		."}"				." div.num {"		."left:7px;"		."}"				."</style>"			."<script type=\"text/javascript\">"		.	" function load_upl_num() {"		.	" listItem = document.upl_form.num.selectedIndex;"		.	" new_num = document.upl_form.num.options[listItem].value;"				.	" for (i = new_num; i <= 50; i++)"		.	" {"		.	" document.getElementById('lbl' + i).style.visibility='hidden';"		.	" document.getElementById('inp' + i).style.visibility='hidden';"		.	" }"					.	" for (i = 1; i <= new_num; i++)"		.	" {"		.	" document.getElementById('lbl' + i).style.visibility='visible';"		.	" document.getElementById('inp' + i).style.visibility='visible';"		.	" }"				." } </script>"				."<script type=\"text/javascript\">"		.	" function sbmt_alter() {"				.	"document.getElementById('upl_bttn').style.visibility='hidden';"		.	"document.getElementById('upl_title').style.visibility='hidden';"		.	"document.getElementById('gears').style.visibility='visible';"		.	"document.getElementById('upl_msg1').style.visibility='visible';"		.	"document.getElementById('upl_msg2').style.visibility='visible';"		.	"document.getElementById('closer').style.visibility='hidden';"		.	"document.getElementById('num').style.visibility='hidden';"		.	"document.getElementById('dir').style.visibility='hidden';"				.	" for (i = 1; i <= 50; i++)"		.	" {"		.	" document.getElementById('lbl' + i).style.visibility='hidden';"		.	" document.getElementById('lbl' + i).style.top='".($Offset['vt']+88)."px';"		.	" document.getElementById('inp' + i).style.visibility='hidden';"		.	" document.getElementById('div' + i).style.top='".($Offset['vt']+83)."px';"		.	" }"				.	"window.resizeTo(360,360);"				." } </script>"						."<script type=\"text/javascript\">"		.	" function check_upl_type(inp_id) {"		.	" var val = document.getElementById(inp_id).value.toLowerCase();"		.	" if (val.lastIndexOf('.mp3')==-1)"		.	" { if (val.lastIndexOf('.m4a')==-1)"		.		" { document.getElementById(inp_id).value='';"		.			" alert('Currently, only mp3 and m4a (aac) audio files are accepted for upload."		.				" We apologize for this inconvenience, and we can assure you that"		.				" more formats will be accepted in the near future.'); return false;"		.		" }"		.	" }"		." } </script>"						."<script type=\"text/javascript\">"		.	" function upl_complete() {"		.	" y_gnre = opener.window.top.gnrelist.pageYOffset;"		.	" y_art = opener.window.top.artlist.pageYOffset;"		.	" y_alb = opener.window.top.alblist.pageYOffset;"		.	" y_slst = opener.window.top.snglist.pageYOffset;"				.	" opener.window.top.storage.document.getElementById(\"scr_gnre\").innerHTML = y_gnre;"		.	" opener.window.top.storage.document.getElementById(\"scr_art\").innerHTML = y_art;"		.	" opener.window.top.storage.document.getElementById(\"scr_alb\").innerHTML = y_alb;"		.	" opener.window.top.storage.document.getElementById(\"scr_slst\").innerHTML = y_slst;"				.	" opener.window.top.storage.document.getElementById(\"sng_stor\").innerHTML = 'i1';"		.	" opener.window.top.storage.document.getElementById(\"art_stor\").innerHTML = 'i0';"		.	" opener.window.top.storage.document.getElementById(\"alb_stor\").innerHTML = 'i0';"		.	" opener.window.top.storage.document.getElementById(\"gnre_stor\").innerHTML = 'i0';"						.	" opener.window.top.gnrelist.location.reload();"		.	" opener.window.top.artlist.location.reload();"		.	" opener.window.top.alblist.location.reload();"		.	" opener.window.top.snglist.location.reload();"		." } </script>"				."\n<title>Audio Uploader</title>"		."\n</head>"		;echo	"<body style=\"background-color:#{$_SESSION['theme']};font-family:arial;\" onLoad=\"";if ($_GET['up'] == 'y')echo	"upl_complete();close();";elseif ($_GET['up'] == 'n')echo	"close();";echo	"\">";$MaxMB = 512;if (!(empty($_GET['num'])))		$num = intval($_GET['num']);else							$num = 1;$num_list = "<option value=\"1\">1 file</option>";for ($rep = 2; $rep <= 50; $rep++){	$num_list .= "<option value=\"{$rep}\">{$rep} files</option>";}echo	"<input"		.	" id=\"upl_bttn\" type=\"button\" value=\"upload selected files\""		.	" style=\"position:absolute;z-index:4;cursor:pointer;left:".(360-160-30)."px;top:90px;font-size:14px;width:160px;\""		.	" onClick=\""		.		"sbmt_alter();"		.		"document.getElementById('upl_form').submit();"		.	"\""		." />"		."<input"		.	" id=\"closer\" type=\"button\" value=\"close window\""		.	" style=\"position:absolute;z-index:4;cursor:pointer;left:".(360-135-30)."px;top:10px;font-size:14px;width:135px;\""		.	" onClick=\"window.close();\""		." />"				."<div id=\"upl_title\" style=\"font:bold 16px arial;top:{$msg_top}px;left:{$left_title}px;\">"		."Audio File Uploader:"		."<a style=\"font:normal 10px arial;text-decoration:none;\">"		."<br /><br />Currently, only <b>MP3</b> and <b>M4A</b> audio files are accepted for upload."		."<br /><br />There is also currently an upper <b>limit of 256 MB</b> per upload."		."</a>"		."</div>"				."<img id=\"gears\" src=\"../static/gears.gif\""		.	" style=\"position:absolute;top:60px;left:20px;width:70px;height:30px;visibility:hidden;\" />"		."<div id=\"upl_msg1\" style=\"font:bold 16px arial;top:{$msg_top}px;left:{$left_title}px;visibility:hidden;\">"		.	"Your audio files are uploading..."		."</div>"		."<div id=\"upl_msg2\" style=\"left:96px;top:40px;width:240px;font:bold 11px arial;visibility:hidden;\">"		.	"Depending on the speed of your connection, this may take some time...<br /><br />"		.	"You may play and organize your library in the meantime, but do not close this window or logout from your account, or your upload will be lost."		."</div>"									."\n<form class=\"upload\" name=\"upl_form\" id=\"upl_form\" method=\"post\" enctype=\"multipart/form-data\""		.	" action=\"upl_sub.php?sess={$sess_id}\" style=\"z-index:3;\">"		."\n<select name=\"num\" id=\"num\" onchange=\"load_upl_num();\""		.	" style=\"position:absolute;top:90px;left:".($Offset['hr']+14)."px;\">{$num_list}</select>"		."\n<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"" . (1048576*$MaxMB) . "\" />"		."\n<div class=\"file\" id=\"dir\">load your local audio files into the fields below</div>"		;		echo	"\n<div class=\"num\" id=\"lbl1\" style=\"top:".($Offset['vt']+88)."px;visibility:visible;\">1.</div>"		."\n<div class=\"file\" id=\"div1\" style=\"top:".($Offset['vt']+83)."px;\">"		."<input class=\"file\" id=\"inp1\" type=\"file\" size=\"24\" name=\"file_1\""		.	" style=\"visibility:visible;\" onChange=\"check_upl_type('inp1')\" /></div>"		;		for ($cnt = 2; $cnt <= 50; $cnt++){	$vt = $Offset['vt']+($cnt+1)*34+10;	echo	"\n<div class=\"num\" id=\"lbl{$cnt}\" style=\"top:".($vt+5)."px;visibility:hidden;\">{$cnt}.</div>"			."\n<div class=\"file\" id=\"div{$cnt}\" style=\"top:{$vt}px;\">"			."<input class=\"file\" id=\"inp{$cnt}\" type=\"file\" size=\"24\" name=\"file_{$cnt}\""			.	" style=\"visibility:hidden;\" onChange=\"check_upl_type('inp{$cnt}')\" /></div>"			;}			echo	"\n</form>"		."\n</body>"		."\n</html>"		;?>