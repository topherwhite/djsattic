<?phpfunction ResizeImageFile($source,$target,$newdim,$quality){$src_img = ImageCreateFromJPEG($source);$dim['x'] = ImageSx($src_img);$dim['y'] = ImageSy($src_img);if ( $dim['x'] >= $dim['y'] ){	$new['x'] = $newdim;	$new['y'] = $newdim / ( $dim['x'] / $dim['y'] );	}else{	$new['y'] = $newdim;	$new['x'] = $newdim / ( $dim['y'] / $dim['x'] );	}$new_img = ImageCreateTrueColor($new['x'],$new['y']);ImageCopyResampled($new_img,$src_img,0,0,0,0,$new['x'],$new['y'],$dim['x'],$dim['y']);ImageJPEG($new_img,$target,$quality);return true;}function CancelUpload($FileDir,$FileName){							$sh_CancelUpload =							"rm " . $FileDir . "drop/" . $FileName							." "  . $FileDir . "drop/" . "old." . $FileName							." "  . $FileDir . "drop/" . "viewable." . $FileName							." "  . $FileDir . "drop/" . "old.viewable." . $FileName							." "  . $FileDir . "drop/" . "orig." . $FileName							." "  . $FileDir . "drop/" . "lrg." . $FileName							;return $sh_CancelUpload;			}function DeleteUploadedFile($FileDir,$FileName,$type){	if ($type == 'img')		$sh_DeleteUploaded =							"rm " . $FileDir . "orig." . $FileName							." "  . $FileDir . "lrg." . $FileName							." "  . $FileDir . "med." . $FileName							." "  . $FileDir . "sml." . $FileName							." "  . $FileDir . "thmb." . $FileName							." "  . $FileDir . "mini." . $FileName							." "  . $FileDir . "edit." . $FileName							;	elseif ($type == 'aud')	$sh_DeleteUploaded = "rm " . $FileDir . $FileName;							return $sh_DeleteUploaded;			}function UndoRotation($ImgSubDir,$FileName){	$sh_UndoRotate = 	"rm " . $ImgSubDir . $FileName				."\n".	"mv " . $ImgSubDir . "old." . $FileName . " " . $ImgSubDir . $FileName				."\n".	"rm " . $ImgSubDir . "viewable." . $FileName				."\n".	"mv " . $ImgSubDir . "old.viewable." . $FileName . " " . $ImgSubDir . "viewable." . $FileName				;return $sh_UndoRotate;		}function RotateImageFiles($ImgSubDir,$FileName,$Rotation){	$BigFile_Name = $FileName;	$SmallFile_Name = "viewable." . $BigFile_Name;	$TempDir = "/Library/WebServer/Documents/-mySimum-/web-content/img_proc/tmp/";$sh_Prep =		"rm " . $ImgSubDir . "old." . $BigFile_Name				. " " . $ImgSubDir . "old." . $SmallFile_Name		."\n".	"cp " . $ImgSubDir . $BigFile_Name . " " . $TempDir . $BigFile_Name		."\n".	"cp " . $ImgSubDir . $SmallFile_Name . " " . $TempDir . $SmallFile_Name		."\n".	"mv " . $ImgSubDir . $BigFile_Name . " " . $ImgSubDir . "old." . $BigFile_Name		."\n".	"mv " . $ImgSubDir . $SmallFile_Name . " " . $ImgSubDir . "old." . $SmallFile_Name		;$sh_CleanUp = 	"cp " . $TempDir . $BigFile_Name . " " . $ImgSubDir . $BigFile_Name		."\n".	"cp " . $TempDir . $SmallFile_Name . " " . $ImgSubDir . $SmallFile_Name		."\n".	"rm " . $TempDir . $BigFile_Name				. " " . $TempDir . $SmallFile_Name		;$sh_CW =	"echo '" . $TempDir . $BigFile_Name . "' >> " . $TempDir . "/rotate.cw.path.txt"	."\n".	"cd /Library/WebServer/Documents/-mySimum-/web-content/img_proc/apps/rotate_cw.app/Contents/MacOS"	."\n".	"sudo -u topher './rotate_cw'"	."\n".	"rm " . $TempDir . "/rotate.cw.path.txt"	."\n".	"echo '" . $TempDir . $SmallFile_Name . "' >> " . $TempDir . "/rotate.cw.path.txt"	."\n".	"cd /Library/WebServer/Documents/-mySimum-/web-content/img_proc/apps/rotate_cw.app/Contents/MacOS"	."\n".	"sudo -u topher './rotate_cw'"	."\n".	"rm " . $TempDir . "/rotate.cw.path.txt"	;				$sh_CCW =	"echo '" . $TempDir . $BigFile_Name . "' >> " . $TempDir . "/rotate.ccw.path.txt"	."\n".	"cd /Library/WebServer/Documents/-mySimum-/web-content/img_proc/apps/rotate_ccw.app/Contents/MacOS"	."\n".	"sudo -u topher './rotate_ccw'"	."\n".	"rm " . $TempDir . "/rotate.ccw.path.txt"	."\n".	"echo '" . $TempDir . $SmallFile_Name . "' >> " . $TempDir . "/rotate.ccw.path.txt"	."\n".	"cd /Library/WebServer/Documents/-mySimum-/web-content/img_proc/apps/rotate_ccw.app/Contents/MacOS"	."\n".	"sudo -u topher './rotate_ccw'"	."\n".	"rm " . $TempDir . "/rotate.ccw.path.txt"	;if ($Rotation == "cw")	$CompleteRotationScript = $sh_Prep . "\n" . $sh_CW . "\n" . $sh_CleanUp;						if ($Rotation == "ccw")	$CompleteRotationScript = $sh_Prep . "\n" . $sh_CCW . "\n" . $sh_CleanUp;return $CompleteRotationScript;		}?>